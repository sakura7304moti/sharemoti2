import{r as d,_ as K,d as W,j as A,a as Y,o as n,c as M,w as i,e as a,aa as g,g as f,b as l,Q as v,aC as G,ad as Q,ag as R,af as X,h as Z,f as $,b1 as x}from"./index.14a7c722.js";import{u as ee,Q as V}from"./use-quasar.7a6bd282.js";import{Q as z}from"./QSelect.c55664e6.js";import{Q as oe}from"./QCheckbox.9468544f.js";import{Q as T}from"./QCardSection.d3461790.js";import{Q as I}from"./QCard.856b109b.js";import{Q as H}from"./QDialog.946db96e.js";import{Q as j}from"./QPagination.51a6a30d.js";import{Q as U}from"./QTooltip.e67df5bd.js";import{Q as te,C as ae}from"./ClosePopup.c7881aea.js";import{Q as le}from"./QPage.82e76fcb.js";import{u as ie}from"./viewSupport.d6db8f87.js";import{a as se,H as ne}from"./HoloNameSelect.6c4695ec.js";import{_ as de}from"./Logo_of_Twitter.9f00de0b.js";import"./BaseApi.ab9ec937.js";import"./use-dark.7ce8ffd6.js";import"./focus-manager.02955f48.js";import"./QField.3dd07fc9.js";import"./QChip.15935488.js";import"./QItem.0cb08ef4.js";import"./QItemLabel.d7165eea.js";import"./position-engine.ef89f240.js";import"./use-tick.7b8fea28.js";import"./use-prevent-scroll.49273e16.js";import"./format.2a3572e1.js";import"./use-checkbox.812d2cd3.js";function ue(){const o=new Date,t=o.getFullYear(),b=String(o.getMonth()+1).padStart(2,"0"),L=String(o.getDate()).padStart(2,"0"),C=`${t}/${b}/${L}`,y=d(!1),k=ee(),e=d({pageNo:1,pageSize:20,hashtag:"",startDate:"",endDate:C,userName:"",mode:"holo",minLike:100,maxLike:0}),s=d({pageNo:0,pageSize:20,hashtag:"",startDate:"",endDate:C,userName:"",minLike:100,maxLike:0}),c=d({totalPages:0,records:[]}),_=d(!1),q=[{label:"\u672A\u6307\u5B9A",value:0},{label:"100",value:100},{label:"1000",value:1e3},{label:"5000",value:5e3},{label:"10000",value:1e4},{label:"20000",value:2e4},{label:"50000",value:5e4},{label:"100000",value:1e5}],D=function(u){return u?u.replaceAll("/","-"):""},S=d(!1),B=function(){e.value.hashtag!=s.value.hashtag&&(e.value.pageNo=1),e.value.startDate!=s.value.startDate&&(e.value.pageNo=1),e.value.endDate!=s.value.endDate&&(e.value.pageNo=1),e.value.userName!=s.value.userName&&(e.value.pageNo=1),e.value.minLike!=s.value.minLike&&(e.value.pageNo=1),e.value.maxLike!=s.value.maxLike&&(e.value.pageNo=1)},F=async function(){var m,N;S.value=!0,c.value.records.splice(0),B(),(e.value.minLike==null||e.value.minLike==null)&&(e.value.minLike=0);const u={page_no:e.value.pageNo,page_size:e.value.pageSize,hashtag:e.value.hashtag,start_date:D(e.value.startDate),end_date:D(e.value.endDate),user_name:e.value.userName,mode:e.value.mode,min_like:(m=e.value.minLike)!=null?m:0,max_like:(N=e.value.maxLike)!=null?N:0,displayMenu:!1};await se.search(u).then(h=>{if(h){console.log("response",h),c.value.totalPages=h.totalPages,h.records.forEach(r=>{r.images.forEach(O=>{if(c.value.records.filter(P=>P.image==w(O)).length==0){const P=r.url.includes("pic.twitter.com")?"https://"+r.url:r.url;c.value.records.push({hashtag:r.hashtag,mode:r.mode,url:P,date:r.date,image:w(O),userId:r.userId,userName:r.userName,likeCount:r.likeCount})}})});const p=JSON.parse(JSON.stringify(e.value));s.value={hashtag:p.hashtag,startDate:p.startDate,endDate:p.endDate,userName:p.userName,mode:p.mode,minLike:p.minLike,maxLike:p.maxLike,pageNo:p.pageNo,pageSize:p.pageSize},y.value=!1}else c.value.totalPages=1}).catch(h=>{console.log(h),k.notify({color:"red",position:"top",message:"\u30C7\u30FC\u30BF\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F"})}),S.value=!1},E=function(u){window.open(u)},w=function(u){if(u.includes("nitter")){const m=u.split("%2F"),N=m[m.length-1].replace(".jpg","").replace(".png","");if(m[m.length-1].includes("jpg"))return`https://pbs.twimg.com/media/${N}?format=jpg&name=orig`;if(m[m.length-1].includes("png"))return`https://pbs.twimg.com/media/${N}?format=png&name=orig`}else return u};return{condition:e,dataState:c,search:F,isLoading:S,dateModalShow:_,selectItems:q,imageLinkOpen:E,searchOptionShow:y}}var J="/assets/holo_icon.67a0a846.jpg";const re=W({name:"twitter-page",components:{"holo-select":ne},setup(){const{fileDownload:o,imageDownload:t}=ie(),{condition:b,dataState:L,search:C,isLoading:y,dateModalShow:k,selectItems:e,imageLinkOpen:s,searchOptionShow:c}=ue(),_=d(!1),q=d(""),D=d(!1),S=function(w){q.value=w,D.value=!0},B=function(w){window.open(w)},F=A(()=>window.innerWidth),E=A(()=>window.innerHeight-100);return{condition:b,dataState:L,search:C,isLoading:y,dateModalShow:k,selectItems:e,imageLinkOpen:s,imageDownload:t,fileDownload:o,downloadMode:_,fullSc:D,fullScreenViewUrl:q,fullScViewClick:S,maximizedToggle:d(!0),pageOpenClick:B,pageWidth:F,pageHeight:E,searchOptionShow:c,test:d("")}}}),me={class:"q-pb-md"},pe={key:0,class:"row q-gutter-md"},ge=a("div",{class:"text-h5",style:{width:"150px"}},"HoloTwitter",-1),ce=a("img",{src:J,style:{height:"30px"}},null,-1),he=[ce],fe={key:1,class:"row q-gutter-md"},ve=a("div",{class:"text-h5",style:{width:"150px"}},"Twitter",-1),ke={class:"row q-gutter-md"},we=a("div",{class:"text-h5"},"\u691C\u7D22\u30AA\u30D7\u30B7\u30E7\u30F3",-1),Ve=a("hr",null,null,-1),Ce=a("div",{class:"text-subtitle1"},"\u30CF\u30C3\u30B7\u30E5\u30BF\u30B0",-1),ye={class:"row q-gutter-md"},De=a("div",{class:"q-pt-md text-subtitle1"},"\u30C4\u30A4\u30FC\u30C8\u65E5",-1),Se={class:"row q-gutter-md"},Ne=a("div",{class:"text-h6 q-pt-sm form-date-span"},"~",-1),be={class:"q-pt-md"},Le=a("div",{class:"text-subtitle1"},"\u30E6\u30FC\u30B6\u30FC\u540D",-1),qe={class:"q-pt-md"},Qe=a("div",{class:"text-subtitle1"},"\u3044\u3044\u306D",-1),$e={class:"row q-gutter-md"},Ue=a("div",{class:"text-h6 q-pt-sm form-date-span"},"~",-1),_e={class:"q-pt-md row q-gutter-cs"},Be={key:0,src:J,style:{height:"30px"}},Fe={key:1,class:"text-subtitle2 q-pt-sm"},Ee={class:"q-pt-md"},Pe=a("div",{class:"row q-gutter-md q-pt-md"},null,-1),Me={key:0,class:"q-pt-sm"},Oe={class:"q-pt-md"},Ae={class:"gallery q-pt-md"},ze=["href","onClick"],Te=["src"],Ie={key:0,class:"button-overlay"},He={class:"row q-gutter-md button"},je=["src","height"],Je={key:1,class:"q-pt-md"};function Ke(o,t,b,L,C,y){const k=Y("holo-select");return n(),M(le,{class:""},{default:i(()=>[a("div",me,[o.condition.mode=="holo"?(n(),g("div",pe,[ge,a("div",null,[a("a",{href:"#",onClick:t[0]||(t[0]=f(e=>o.condition.mode="",["prevent"]))},he)])])):(n(),g("div",fe,[ve,a("div",null,[a("a",{href:"#",onClick:t[2]||(t[2]=f(e=>o.condition.mode="holo",["prevent"]))},[a("img",{src:de,style:{height:"30px"},onClick:t[1]||(t[1]=f(e=>o.condition.mode="",["prevent"]))})])])]))]),a("div",ke,[l(V,{modelValue:o.condition.hashtag,"onUpdate:modelValue":t[3]||(t[3]=e=>o.condition.hashtag=e),label:"hashtag",class:"form-model",dense:"","stack-label":"",onKeydown:t[4]||(t[4]=G(e=>o.search(),["enter"]))},{default:i(()=>[l(v,{color:"primary",dense:"",icon:"search",onClick:o.search,loading:o.isLoading},null,8,["onClick","loading"])]),_:1},8,["modelValue"]),o.condition.mode=="holo"?(n(),M(k,{key:0,modelValue:o.condition.hashtag,"onUpdate:modelValue":t[5]||(t[5]=e=>o.condition.hashtag=e),label:"hololive fanart"},null,8,["modelValue"])):Q("",!0),l(z,{label:"\u2661",modelValue:o.condition.minLike,"onUpdate:modelValue":t[6]||(t[6]=e=>o.condition.minLike=e),options:o.selectItems,"emit-value":"","map-options":"","stack-label":"",dense:"",style:{height:"40px",width:"80px"}},null,8,["modelValue","options"]),a("div",null,[l(v,{icon:"settings",color:"grey",size:"sm",round:"",onClick:t[7]||(t[7]=e=>o.searchOptionShow=!0)})])]),l(H,{modelValue:o.searchOptionShow,"onUpdate:modelValue":t[16]||(t[16]=e=>o.searchOptionShow=e)},{default:i(()=>[l(I,{style:{height:"500px"}},{default:i(()=>[l(T,null,{default:i(()=>[we,Ve,Ce,a("div",ye,[l(V,{modelValue:o.condition.hashtag,"onUpdate:modelValue":t[8]||(t[8]=e=>o.condition.hashtag=e),class:"form-model",dense:"","stack-label":"",filled:""},null,8,["modelValue"]),l(k,{modelValue:o.condition.hashtag,"onUpdate:modelValue":t[9]||(t[9]=e=>o.condition.hashtag=e),label:"\u30DB\u30ED\u30E9\u30A4\u30D6\u30D5\u30A1\u30F3\u30A2\u30FC\u30C8"},null,8,["modelValue"])]),De,a("div",Se,[l(V,{modelValue:o.condition.startDate,"onUpdate:modelValue":t[10]||(t[10]=e=>o.condition.startDate=e),class:"form-model",dense:"",type:"date",filled:""},null,8,["modelValue"]),Ne,l(V,{modelValue:o.condition.endDate,"onUpdate:modelValue":t[11]||(t[11]=e=>o.condition.endDate=e),class:"form-model",dense:"",type:"date",filled:""},null,8,["modelValue"])]),a("div",be,[Le,l(V,{modelValue:o.condition.userName,"onUpdate:modelValue":t[12]||(t[12]=e=>o.condition.userName=e),class:"form-model","stack-label":"",dense:"",filled:""},null,8,["modelValue"])]),a("div",qe,[Qe,a("div",$e,[l(V,{modelValue:o.condition.minLike,"onUpdate:modelValue":t[13]||(t[13]=e=>o.condition.minLike=e),class:"form-model",type:"number",dense:"",filled:""},null,8,["modelValue"]),Ue,l(z,{modelValue:o.condition.maxLike,"onUpdate:modelValue":t[14]||(t[14]=e=>o.condition.maxLike=e),options:o.selectItems,class:"form-model","emit-value":"","map-options":"","stack-label":"",dense:"",filled:""},null,8,["modelValue","options"])])]),a("div",_e,[a("div",null,[l(oe,{"true-value":"holo","false-value":"",modelValue:o.condition.mode,"onUpdate:modelValue":t[15]||(t[15]=e=>o.condition.mode=e),color:"cyan"},null,8,["modelValue"])]),a("div",null,[o.condition.mode=="holo"?(n(),g("img",Be)):(n(),g("div",Fe," \u30DB\u30ED\u30E9\u30A4\u30D6\u306E\u753B\u50CF\u306E\u307F "))])]),a("div",Ee,[l(v,{color:"primary",dense:"",icon:"search",onClick:o.search,loading:o.isLoading,label:"\u691C\u7D22"},null,8,["onClick","loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),Pe,o.dataState.totalPages>1?(n(),g("div",Me,[l(j,{modelValue:o.condition.pageNo,"onUpdate:modelValue":t[17]||(t[17]=e=>o.condition.pageNo=e),"direction-links":"",max:o.dataState.totalPages,"max-pages":10,onClick:t[18]||(t[18]=e=>o.search())},null,8,["modelValue","max"])])):Q("",!0),a("div",Oe,[a("ul",Ae,[(n(!0),g(X,null,R(o.dataState.records,e=>(n(),g("li",{key:e.image},[a("a",{href:e.image,onClick:f(s=>e.displayMenu=!e.displayMenu,["prevent","stop"]),class:x(["image-container",{"image-selected":e.displayMenu}])},[a("img",{src:e.image},null,8,Te),e.displayMenu?(n(),g("div",Ie,[a("div",He,[l(v,{icon:"file_download",onClick:f(s=>o.fileDownload(e.image),["prevent"]),color:"primary",round:""},{default:i(()=>[l(U,{delay:1e3},{default:i(()=>[$("download")]),_:1})]),_:2},1032,["onClick"]),l(v,{icon:"image",onClick:f(s=>o.fullScViewClick(e.image),["prevent"]),color:"secondary",round:""},{default:i(()=>[l(U,{delay:1e3},{default:i(()=>[$("image view")]),_:1})]),_:2},1032,["onClick"]),l(v,{icon:"info",onClick:f(s=>o.pageOpenClick(e.url),["prevent"]),color:"black",round:""},{default:i(()=>[l(U,{delay:1e3},{default:i(()=>[$("tweet link")]),_:1})]),_:2},1032,["onClick"])])])):Q("",!0)],10,ze)]))),128))])]),l(H,{modelValue:o.fullSc,"onUpdate:modelValue":t[19]||(t[19]=e=>o.fullSc=e),persistent:"","full-height":"","full-width":"","transition-show":"slide-up","transition-hide":"slide-down"},{default:i(()=>[l(I,null,{default:i(()=>[l(T,null,{default:i(()=>[l(te,null,{default:i(()=>[Z((n(),M(v,{dense:"",flat:"",icon:"close",style:{"margin-left":"auto"}},{default:i(()=>[l(U,{class:"bg-white text-primary"},{default:i(()=>[$("Close")]),_:1})]),_:1})),[[ae]])]),_:1}),a("img",{src:o.fullScreenViewUrl,height:o.pageHeight},null,8,je)]),_:1})]),_:1})]),_:1},8,["modelValue"]),o.dataState.totalPages>1&&!o.isLoading?(n(),g("div",Je,[l(j,{modelValue:o.condition.pageNo,"onUpdate:modelValue":t[20]||(t[20]=e=>o.condition.pageNo=e),max:o.dataState.totalPages,"max-pages":10,onClick:t[21]||(t[21]=e=>o.search()),"direction-links":""},null,8,["modelValue","max"])])):Q("",!0)]),_:1})}var Vo=K(re,[["render",Ke]]);export{Vo as default};
