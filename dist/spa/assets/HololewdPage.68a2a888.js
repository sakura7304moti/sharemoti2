import{Q as P}from"./QSelect.c55664e6.js";import{r,_ as U,d as $,j as q,o as g,c as B,w as n,e as s,b as o,Q as L,aa as h,ad as y,ag as z,af as D,h as E,f as S,g as _,b1 as O}from"./index.14a7c722.js";import{Q as H}from"./QPagination.51a6a30d.js";import{Q as V}from"./QTooltip.e67df5bd.js";import{Q as A,C as I}from"./ClosePopup.c7881aea.js";import{Q as T}from"./QCardSection.d3461790.js";import{Q as J}from"./QCard.856b109b.js";import{Q as W}from"./QDialog.946db96e.js";import{Q as j}from"./QPage.82e76fcb.js";import{u as G}from"./viewSupport.d6db8f87.js";import{u as K}from"./use-quasar.7a6bd282.js";import{A as R}from"./BaseApi.ab9ec937.js";import"./QField.3dd07fc9.js";import"./QChip.15935488.js";import"./use-dark.7ce8ffd6.js";import"./QItem.0cb08ef4.js";import"./QItemLabel.d7165eea.js";import"./position-engine.ef89f240.js";import"./use-tick.7b8fea28.js";import"./focus-manager.02955f48.js";import"./use-prevent-scroll.49273e16.js";import"./format.2a3572e1.js";class X extends R{search(e){const t="/hololewd/search",d=this.combineUrl(t);return this.httpPost(d,e)}holoList(){const e="/hololewd/hololist",t=this.combineUrl(e);return this.httpGet(t)}}const F=new X;function Y(){const a=K(),e=r({pageNo:1,pageSize:20,fullName:"",firstName:"",lastName:"",minLike:0,maxLike:0}),t=r({pageNo:1,pageSize:20,fullName:"",firstName:"",lastName:"",minLike:0,maxLike:0}),d=r({totalPages:0,records:[]}),N=[{label:"\u672A\u6307\u5B9A",value:0},{label:"100",value:100},{label:"500",value:500},{label:"1000",value:1e3},{label:"2000",value:2e3},{label:"3000",value:3e3},{label:"4000",value:4e3},{label:"5000",value:5e3}],v=r([]),l=async function(){v.value.splice(0),await F.holoList().then(i=>{console.log("response",i),i==null||i.forEach(f=>v.value.push(f))}).catch(i=>{console.log(i),a.notify({color:"red",position:"top",message:"\u30C7\u30FC\u30BF\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F"})})};l();const c=r(!1),C=function(){e.value.fullName!=t.value.fullName&&(e.value.pageNo=1),e.value.firstName!=t.value.firstName&&(e.value.pageNo=1),e.value.lastName!=t.value.lastName&&(e.value.pageNo=1),e.value.minLike!=t.value.minLike&&(e.value.pageNo=1),e.value.maxLike!=t.value.maxLike&&(e.value.pageNo=1)};return{condition:e,dataState:d,search:async function(){var f,k,w;c.value=!0,d.value.records.splice(0),C();const i={page_no:e.value.pageNo,page_size:e.value.pageSize,full_name:(f=e.value.fullName)!=null?f:"",first_name:(k=e.value.firstName)!=null?k:"",last_name:(w=e.value.lastName)!=null?w:"",min_like:e.value.minLike,max_like:e.value.maxLike,displayMenu:!1};await F.search(i).then(p=>{if(p){console.log("response",p),d.value.totalPages=p.totalPages,p.records.forEach(u=>{u.images.forEach(M=>{d.value.records.push({fullName:u.fullName,firstName:u.firstName,lastName:u.lastName,url:u.url,image:M,video:"",vote:u.vote,displayMenu:!1})})});const m=JSON.parse(JSON.stringify(e.value));t.value={fullName:m.fullName,firstName:m.firstName,lastName:m.lastName,minLike:m.minLike,maxLike:m.maxLike,pageNo:m.pageNo,pageSize:m.pageSize}}}).catch(p=>{console.log(p),a.notify({color:"red",position:"top",message:"\u30C7\u30FC\u30BF\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F"})}),c.value=!1},isLoading:c,holoList:v,getHoloList:l,selectItems:N,imageLinkOpen:function(i){window.open(i)}}}const Z=$({name:"holoewd-page",setup(){const{condition:a,dataState:e,search:t,isLoading:d,holoList:N,getHoloList:v,selectItems:l,imageLinkOpen:c}=Y(),{fileDownload:C,imageDownload:b}=G(),Q=r(!1),i=r(""),f=r(!1),k=function(u){i.value=u,f.value=!0},w=function(u){window.open(u)},p=q(()=>window.innerWidth),m=q(()=>window.innerHeight-100);return{condition:a,dataState:e,search:t,isLoading:d,holoList:N,getHoloList:v,selectItems:l,imageLinkOpen:c,fileDownload:C,imageDownload:b,downloadMode:Q,fullSc:f,fullScreenViewUrl:i,fullScViewClick:k,maximizedToggle:r(!0),pageOpenClick:w,pageWidth:p,pageHeight:m}}}),x=s("div",{class:"text-h5 q-pb-md"},"Hololewd Scraper",-1),ee={class:"row q-gutter-md"},ae={class:"row q-gutter-md q-pt-md"},le={key:0,class:"q-pt-sm"},oe=s("hr",null,null,-1),te={class:"q-pt-md"},ie={class:"gallery q-pt-md"},se=["href","onClick"],ne=["src"],ue={key:0,class:"button-overlay"},de={class:"row q-gutter-md button"},me=["src","height"],re={key:1,class:"q-pt-md"},ce=s("hr",null,null,-1),pe=s("hr",null,null,-1);function fe(a,e,t,d,N,v){return g(),B(j,{class:""},{default:n(()=>[x,s("div",ee,[o(P,{label:"fullNames",modelValue:a.condition.fullName,"onUpdate:modelValue":e[0]||(e[0]=l=>a.condition.fullName=l),options:a.holoList,class:"form-model",dense:"","stack-label":"",clearable:""},null,8,["modelValue","options"]),o(P,{label:"min like",modelValue:a.condition.minLike,"onUpdate:modelValue":e[1]||(e[1]=l=>a.condition.minLike=l),options:a.selectItems,class:"form-model","emit-value":"","map-options":"",dense:""},null,8,["modelValue","options"])]),s("div",ae,[o(L,{label:"\u691C\u7D22",color:"primary",dense:"",icon:"search",onClick:a.search,loading:a.isLoading},null,8,["onClick","loading"])]),a.dataState.totalPages>1?(g(),h("div",le,[o(H,{modelValue:a.condition.pageNo,"onUpdate:modelValue":e[2]||(e[2]=l=>a.condition.pageNo=l),max:a.dataState.totalPages,"max-pages":10,onClick:e[3]||(e[3]=l=>a.search())},null,8,["modelValue","max"]),oe])):y("",!0),s("div",te,[s("ul",ie,[(g(!0),h(D,null,z(a.dataState.records,l=>(g(),h("li",{key:l.image},[s("a",{href:l.image,onClick:_(c=>l.displayMenu=!l.displayMenu,["prevent","stop"]),class:O(["image-container",{"image-selected":l.displayMenu}])},[s("img",{src:l.image},null,8,ne),l.displayMenu?(g(),h("div",ue,[s("div",de,[o(L,{icon:"file_download",onClick:_(c=>a.imageDownload(l.image),["prevent"]),color:"primary",round:""},{default:n(()=>[o(V,{delay:1e3},{default:n(()=>[S("download")]),_:1})]),_:2},1032,["onClick"]),o(L,{icon:"image",onClick:_(c=>a.fullScViewClick(l.image),["prevent"]),color:"secondary",round:""},{default:n(()=>[o(V,{delay:1e3},{default:n(()=>[S("image view")]),_:1})]),_:2},1032,["onClick"])])])):y("",!0)],10,se)]))),128))])]),o(W,{modelValue:a.fullSc,"onUpdate:modelValue":e[4]||(e[4]=l=>a.fullSc=l),persistent:"","full-height":"","full-width":"","transition-show":"slide-up","transition-hide":"slide-down"},{default:n(()=>[o(J,null,{default:n(()=>[o(T,null,{default:n(()=>[o(A,null,{default:n(()=>[E((g(),B(L,{dense:"",flat:"",icon:"close",style:{"margin-left":"auto"}},{default:n(()=>[o(V,{class:"bg-white text-primary"},{default:n(()=>[S("Close")]),_:1})]),_:1})),[[I]])]),_:1}),s("img",{src:a.fullScreenViewUrl,height:a.pageHeight},null,8,me)]),_:1})]),_:1})]),_:1},8,["modelValue"]),a.dataState.totalPages>1&&!a.isLoading?(g(),h("div",re,[ce,o(H,{modelValue:a.condition.pageNo,"onUpdate:modelValue":e[5]||(e[5]=l=>a.condition.pageNo=l),max:a.dataState.totalPages,"max-pages":10,onClick:e[6]||(e[6]=l=>a.search())},null,8,["modelValue","max"]),pe])):y("",!0)]),_:1})}var ze=U(Z,[["render",fe]]);export{ze as default};
